# =============================================================================
# USER STORY: Task Management (System-Specific Example)
# =============================================================================
# @spec_version: 1.0.0
# @priority: MVP
# @journey: DAILY_USAGE
# @systems: [TASK_SYSTEM]
# @last_updated: 2025-11-09T00:00:00Z
# @spec_source: 04.SYSTEMS/TASK_SYSTEM.md:45

id: US-301
title: Edit existing task details
requirement_id: R-301

acceptance_criteria:
  - id: AC-301-1
    title: Member can update task name
    narrative: |
      Given I have an existing task
      When I edit the task name and save
      Then I should see the updated name displayed
    given:
      - loginAs: member
      - seedItem: { slug: 'my-task', status: 'active', name: 'Old Task Name' }
      - visit: '/tasks/my-task'
    when:
      - click: { selector: '[data-test=edit-task]' }
      - fill: { selector: '[data-test=task-name-input]', value: 'Updated Task Name' }
      - click: { selector: '[data-test=save-task]' }
    then:
      - shouldContain: { selector: '[data-test=task-name]', text: 'Updated Task Name' }

# =============================================================================
# USER STORY: Task Deletion with Confirmation (System-Specific Example)
# =============================================================================
# @spec_version: 1.0.0
# @priority: MVP
# @journey: DAILY_USAGE
# @systems: [TASK_SYSTEM]
# @last_updated: 2025-11-09T00:00:00Z
# @spec_source: 04.SYSTEMS/TASK_SYSTEM.md:67

id: US-302
title: Delete task with confirmation
requirement_id: R-302

acceptance_criteria:
  - id: AC-302-1
    title: Deletion requires confirmation
    narrative: |
      Given I have an existing task
      When I click delete and confirm
      Then the task should be removed from my list
    given:
      - loginAs: member
      - seedItem: { slug: 'deletable-task', status: 'active', name: 'Task to Delete' }
      - visit: '/dashboard'
    when:
      - click: { selector: '[data-test=task-item][data-slug=deletable-task] [data-test=delete]' }
      - click: { selector: '[data-test=confirm-delete]' }
    then:
      - shouldExist: { selector: '[data-test=task-list]:not(:has([data-slug=deletable-task]))' }

  - id: AC-302-2
    title: Canceling deletion keeps task
    narrative: |
      Given I have an existing task
      When I click delete but cancel the confirmation
      Then the task should remain in my list
    given:
      - loginAs: member
      - seedItem: { slug: 'safe-task', status: 'active', name: 'Safe Task' }
      - visit: '/dashboard'
    when:
      - click: { selector: '[data-test=task-item][data-slug=safe-task] [data-test=delete]' }
      - click: { selector: '[data-test=cancel-delete]' }
    then:
      - shouldContain: { selector: '[data-test=task-item][data-slug=safe-task]', text: 'Safe Task' }
