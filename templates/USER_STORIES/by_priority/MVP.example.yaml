# =============================================================================
# USER STORY: Quick Task Creation (MVP Example)
# =============================================================================
# @spec_version: 1.0.0
# @priority: MVP
# @journey: DAILY_USAGE
# @systems: [TASK_SYSTEM]
# @last_updated: 2025-11-09T00:00:00Z
# @spec_source: 04.SYSTEMS/TASK_SYSTEM.md:32

id: US-101
title: Add new tasks quickly
requirement_id: R-101
# skip: true  # Uncomment to skip this entire story
# only: true  # Uncomment to run ONLY this story (for local development)

acceptance_criteria:
  - id: AC-101-1
    title: Member can create task from main screen
    # skip: true  # Uncomment to skip just this acceptance criterion
    # only: true  # Uncomment to run ONLY this acceptance criterion
    narrative: |
      Given I am a logged-in member viewing the main screen
      When I click the add task button and enter a task name
      Then I should see the task appear in my current list
    given:
      - loginAs: member
      - visit: '/dashboard'
    when:
      - click: { selector: '[data-test=add-task]' }
      - fill: { selector: '[data-test=task-input]', value: 'Buy groceries' }
      - click: { selector: '[data-test=save-task]' }
    then:
      - shouldExist: { selector: '[data-test=task-list] [data-test=task-item]' }
      - shouldContain: { selector: '[data-test=task-item]', text: 'Buy groceries' }

  - id: AC-101-2
    title: Empty tasks are rejected
    narrative: |
      Given I am a logged-in member viewing the main screen
      When I try to create a task with only whitespace
      Then I should see a validation error and no task is created
    given:
      - loginAs: member
      - visit: '/dashboard'
    when:
      - click: { selector: '[data-test=add-task]' }
      - fill: { selector: '[data-test=task-input]', value: '   ' }
      - click: { selector: '[data-test=save-task]' }
    then:
      - shouldContain: { selector: '[data-test=error]', text: 'Task name is required' }
      - shouldExist: { selector: '[data-test=task-list]:empty' }

# =============================================================================
# USER STORY: Instant Reward Feedback (Cross-System MVP Example)
# =============================================================================
# @spec_version: 1.0.0
# @priority: MVP
# @journey: DAILY_USAGE
# @systems: [TASK_SYSTEM, REWARD_SYSTEM, VIEW_SYSTEM]
# @last_updated: 2025-11-09T00:00:00Z
# @spec_source: 04.SYSTEMS/TASK_SYSTEM.md:89, 04.SYSTEMS/REWARD_SYSTEM.md:45

id: US-102
title: See points awarded immediately on task completion
requirement_id: R-102
# skip: true  # Uncomment to skip this entire story
# only: true  # Uncomment to run ONLY this story (for local development)

acceptance_criteria:
  - id: AC-102-1
    title: Points update within 100ms of completion
    narrative: |
      Given I have an active task with base points value
      When I mark the task as complete
      Then I should see my points total increase within 100ms with visual feedback
    given:
      - loginAs: member
      - seedItem: { slug: 'my-task', status: 'active', points: 10 }
      - visit: '/tasks/my-task'
    when:
      - click: { selector: '[data-test=complete-task]' }
    then:
      - shouldContain: { selector: '[data-test=points-total]', text: '10' }
      - shouldExist: { selector: '[data-test=feedback-animation]' }
